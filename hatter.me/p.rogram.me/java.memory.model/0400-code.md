!!EXPLAIN
代码分析


!!#sample1# Sample 1

#### 源代码：

%%% prettify ln=1
public class Sample {
  private static int count = 0;
  
  public static void increment() {
    count++;
  }
}
%%%


!!#sample2# Sample 2

#### 源代码：

%%% prettify ln=1
// 代码1
public class Sample {
  private static int count = 0;
  
  synchronized public static void increment() {
    count++;
  }
}
  
// 代码2
public class Sample {
  private static AtomicInteger count = new AtomicInteger(0);
  
  public static void increment() {
    count.getAndIncrement();
  }
}
%%%


!!#sample3# Sample 3

#### 源代码：

%%% prettify ln=1
public class CacheTest {

    public static void main(String[] args) {
        int[] arr = new int[64 * 1024 * 1024];
        for (int _loop = 0; _loop < 10; _loop++) {
            System.out.print("Round: " + _loop);
            {
                long s = System.currentTimeMillis();
                for (int i = 0; i < arr.length; i++) {
                    arr[i] *= 3;
                }
                System.out.print("\t" + (System.currentTimeMillis() - s) + " ms");
            }
            {
                long s = System.currentTimeMillis();
                for (int i = 0; i < arr.length; i += 8) {
                    arr[i] *= 3;
                }
                System.out.print("\t" + (System.currentTimeMillis() - s) + " ms");
            }
            {
                long s = System.currentTimeMillis();
                for (int i = 0; i < arr.length; i += 16) {
                    arr[i] *= 3;
                }
                System.out.print("\t" + (System.currentTimeMillis() - s) + " ms");
            }
            {
                long s = System.currentTimeMillis();
                for (int i = 0; i < arr.length; i += 32) {
                    arr[i] *= 3;
                }
                System.out.print("\t" + (System.currentTimeMillis() - s) + " ms");
            }
            System.out.println();
        }
    }
}
%%%

#### 测试结果如下：

从下面的结果可以看到只有到了第4列消耗的时间大幅减少。为什么呢？

%%% prettify ln=1
Round: 0  164 ms  135 ms  132 ms  90 ms
Round: 1  169 ms  136 ms  147 ms  103 ms
Round: 2  140 ms  131 ms  131 ms  83 ms
Round: 3  141 ms  131 ms  133 ms  82 ms
Round: 4  165 ms  140 ms  134 ms  84 ms
Round: 5  172 ms  135 ms  129 ms  89 ms
Round: 6  143 ms  149 ms  129 ms  93 ms
Round: 7  140 ms  136 ms  130 ms  88 ms
Round: 8  137 ms  136 ms  129 ms  86 ms
Round: 9  137 ms  131 ms  132 ms  82 ms
%%%


